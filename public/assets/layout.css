:root{
  --color-primary: #12AFF0;
  --color-soft: #E6F7FF;
  --color-bg-accent: #F5FCFF;
}

html[data-theme="red"]{
  --color-primary:#EF4444; --color-soft:#FEE2E2; --color-bg-accent:#FFF5F5;
  --brand-weak-mix: 5%;
  --brand-soft-mix: 8%;
  --brand-border-mix: 18%;
  --brand-text-mix: 60%;
}
html[data-theme="orange"]{
  --color-primary:#F97316; --color-soft:#FFEDD5; --color-bg-accent:#FFF7ED;
}
html[data-theme="yellow"]{
  --color-primary:#EAB308; --color-soft:#FEF9C3; --color-bg-accent:#FEFCE8;
  --brand-weak-mix: 4%;
  --brand-soft-mix: 7%;
  --brand-border-mix: 16%;
  --brand-text-mix: 55%;
}
html[data-theme="green"]{
  --color-primary:#22C55E; --color-soft:#DCFCE7; --color-bg-accent:#F0FDF4;
}
html[data-theme="cyan"]{
  --color-primary:#12AFF0; --color-soft:#E6F7FF; --color-bg-accent:#F5FCFF;
}
html[data-theme="blue"]{
  --color-primary:#2563EB; --color-soft:#DBEAFE; --color-bg-accent:#EFF6FF;
}
html[data-theme="violet"]{
  --color-primary:#8B5CF6; --color-soft:#EDE9FE; --color-bg-accent:#F5F3FF;
}

:root{
  color-scheme: light;
  --font-sans: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";

  /* ===== Theme colors (default = brand cyan) ===== */
  --color-primary: #12AFF0;
  --color-soft: #E6F7FF;
  --color-bg-accent: #F5FCFF;

  --color-primary-strong: color-mix(in srgb, var(--color-primary) 86%, var(--neutral-900));

  /* ===== Neutral palette ===== */
  --neutral-0: #ffffff;
  --neutral-50: #f8fafc;
  --neutral-75: #f7fafc;
  --neutral-100: #f1f5f9;
  --neutral-200: #e5eaf0;
  --neutral-300: #d0d5dd;
  --neutral-400: #9ca3af;
  --neutral-500: #667085;
  --neutral-600: #475569;
  --neutral-700: #344054;
  --neutral-800: #111827;
  --neutral-900: #0f172a;

  /* ===== Brand tokens ===== */
  --brand: var(--color-primary);
  --brand-weak-mix: 6%;
  --brand-soft-mix: 10%;
  --brand-border-mix: 22%;
  --brand-hover-mix: 92%;
  --brand-text-mix: 70%;
  --brand-weak-bg: color-mix(in srgb, var(--brand) var(--brand-weak-mix), var(--neutral-50));
  --brand-soft-bg: color-mix(in srgb, var(--brand) var(--brand-soft-mix), var(--neutral-50));
  --brand-border: color-mix(in srgb, var(--brand) var(--brand-border-mix), var(--neutral-200));
  --brand-hover: color-mix(in srgb, var(--brand) var(--brand-hover-mix), var(--neutral-900));
  --brand-contrast: #ffffff;
  --brand-text-strong: color-mix(in srgb, var(--brand) var(--brand-text-mix), var(--neutral-900));
  --brand-ink: var(--neutral-900);
  --brand-cyan: var(--color-primary);
  --brand-cyan-600: var(--color-primary-strong);
  --brand-blue: var(--color-primary);
  --brand-blue-600: var(--color-primary-strong);

  /* ===== UI tokens ===== */
  --bg: var(--neutral-75);
  --surface: var(--neutral-0);
  --soft: var(--neutral-100);
  --text: var(--brand-ink);
  --muted: var(--neutral-600);
  --line: var(--neutral-200);
  --primary: var(--brand);
  --primary-ink: var(--neutral-900);
  --primary-50: var(--brand-weak-bg);
  --primary-600: var(--color-primary-strong);

  --link-color: var(--brand);
  --focus-ring: color-mix(in srgb, var(--brand) 30%, transparent);
  --icon-accent: var(--brand);

  --btn-primary-bg: var(--brand);
  --btn-primary-bg-hover: var(--brand-hover);
  --btn-primary-border: var(--brand);
  --btn-primary-text: var(--brand-contrast);

  --btn-ghost-border: var(--brand-border);
  --btn-ghost-text: color-mix(in srgb, var(--brand) 70%, var(--neutral-900));

  --hover-soft: var(--brand-weak-bg);
  --hover-soft-strong: var(--brand-soft-bg);
  --btn-ghost-bg-hover: var(--hover-soft);

  --btn-elev: 0 6px 14px color-mix(in srgb, var(--brand) 35%, transparent);
  --btn-elev-hover: 0 12px 24px color-mix(in srgb, var(--brand) 40%, transparent);
  --btn-elev-active: 0 4px 10px color-mix(in srgb, var(--brand) 35%, transparent);

  --btn-min-h: 44px;
  --btn-pad-x: 1rem;
  --btn-pad-y: 0.625rem;

  --tag-bg: var(--brand-soft-bg);
  --tag-text: var(--brand-text-strong);
  --tag-border: var(--brand-border);

  --card-border: var(--neutral-200);
  --card-shadow: var(--shadow);
  --form-border: var(--neutral-300);
  --form-bg: var(--surface);
  --form-text: var(--neutral-900);
  --form-placeholder: var(--neutral-500);
  --form-focus: var(--brand);
  --form-focus-ring: color-mix(in srgb, var(--brand) 25%, transparent);

  --danger: #dc2626;
  --success: #15803d;
  --success-bg: color-mix(in srgb, var(--success) 12%, var(--neutral-50));
  --success-border: color-mix(in srgb, var(--success) 28%, var(--neutral-200));
  --success-text: color-mix(in srgb, var(--success) 70%, var(--neutral-900));

  --info-bg: var(--brand-weak-bg);
  --info-border: var(--brand-border);
  --info-text: var(--brand-text-strong);

  --status-success-bg: var(--success-bg);
  --status-success-text: var(--success-text);
  --status-success-border: var(--success-border);
  --status-warning-bg: var(--brand-soft-bg);
  --status-warning-text: color-mix(in srgb, var(--brand) 70%, var(--neutral-900));
  --status-warning-border: color-mix(in srgb, var(--brand) 30%, var(--neutral-200));
  --status-muted-bg: var(--brand-weak-bg);
  --status-muted-text: color-mix(in srgb, var(--brand) 55%, var(--neutral-900));
  --status-muted-border: var(--brand-border);

  --hero-bg: var(--brand-weak-bg);
  --header-bg: var(--surface);
  --header-border: var(--line);

  --sidebar-collapsed-width: 46px;
  --sidebar-expanded-width: 260px;
  --header-height: 64px;
  --bg-sidebar: var(--neutral-50);
  --bg-sidebar-hover: var(--hover-soft);
  --border-color-soft: var(--neutral-200);
  --sidebar-accent: var(--color-primary);
  --sidebar-accent-strong: var(--color-primary);
  --menu-active-bg: color-mix(in srgb, var(--color-primary) 18%, var(--neutral-0));
  --scrollbar-thumb: var(--neutral-400);

  --shadow:0 10px 24px rgba(15,23,42,.06);
  --w:clamp(300px,92vw,1320px);

  /* Сетка и отступы (8-pt) */
  --space-1:8px; --space-2:16px; --space-3:24px; --space-4:32px;
  --space-5:40px; --space-6:48px; --space-8:64px;
  --section-y: var(--space-8);
  --gap: 24px;

  /* Радиусы через токены */
  --r-card:16px;
  --r-btn:12px;
  --r-chip:999px;

  --transition-fast: 0.25s ease;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--text);
  font:16px/1.6 var(--font-sans);
  text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;
}
body.chameleon-intro::before{
  content:"";
  position: fixed;
  inset: -25%;
  pointer-events:none;
  z-index: 9999;
  background: linear-gradient(
    90deg,
    #ff2d55, #ff9500, #ffd60a, #34c759, #32ade6, #5856d6, #af52de, #ff2d55
  );
  opacity: 0;
  transform: translateX(-120%) rotate(-10deg) scale(1.05);
  mix-blend-mode: soft-light;
  filter: saturate(1.15) contrast(1.02);
  animation: chameleonIntro 900ms ease-in-out forwards;
}
@keyframes chameleonIntro{
  0%{opacity:0;transform:translateX(-120%) rotate(-10deg) scale(1.05);}
  15%{opacity:.55;}
  70%{opacity:.55;transform:translateX(0%) rotate(-10deg) scale(1.05);}
  100%{opacity:0;transform:translateX(120%) rotate(-10deg) scale(1.05);}
}
@media (prefers-reduced-motion: reduce){
  body.chameleon-intro::before{display:none;}
}
a{color:var(--link-color);text-decoration:none}
a:hover{text-decoration:underline}
.wrap{max-width:var(--w);margin:0 auto;padding:0 var(--gap)}
.skip{position:absolute;left:-9999px;top:auto}
.skip:focus{left:12px;top:12px;background:var(--surface);color:var(--text);padding:.5rem .75rem;border-radius:8px;z-index:1000}
:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px}

/* Header */
header{
  display: block;
  position: sticky;
  top: 0;
  z-index: 1100;
  min-height: 56px;
  background:var(--header-bg);
  border-bottom:3px solid var(--brand);
overflow-x: clip;

}
/* Make the header container flush with the edges of the viewport and span full width */
header .wrap{
  margin-left:0;
  margin-right:0;
  max-width:none;
  width:100%;
  padding-left:var(--space-1);
  padding-right:var(--space-1);
}
/* Reduce left padding on the nav within the header so the burger sits near the edge */
header .nav{
  padding-left:0;
}
.nav{
  display:flex;
  align-items:center;
  gap:18px;
  padding:12px 0;
  min-width: 0;
}
.brand{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:700;
  letter-spacing:.2px;
  color: var(--neutral-900);
  text-decoration: none;
  min-width: 0;
  max-width: 60vw;
}
.brand img,
.brand svg{
  height:40px;
  width:auto;
  display:block;
  max-width: 240px;
}
.upgr-logo{
  height: 40px;
  width: auto;
  display: block;
  position: relative;
  max-width: 240px;
  flex-shrink: 0;
}
.brand img,
.brand svg{
  height: 40px;
  width: auto;
  display: block;
  max-width: 240px;
}

/* совместимость: если где-то используется класс upgr-logo */
.upgr-logo{
  height: 40px;
  width: auto;
  display: block;
  position: relative;
  max-width: 240px;
  flex-shrink: 0;
}

.upgr-logo__base{
  height: 100%;
  width: auto;
  display: block;
  max-width: 100%;
}

.upgr-logo__accent{
  position: absolute;
  inset: 0;
  background-color: var(--color-primary);
mask-image: url("/assets/logo/logo-blue-only.png");
mask-repeat: no-repeat;
mask-size: contain;
mask-position: center;
-webkit-mask-image: url("/assets/logo/logo-blue-only.png");
-webkit-mask-repeat: no-repeat;
-webkit-mask-size: contain;
-webkit-mask-position: center;

  -webkit-mask-repeat: no-repeat;
  -webkit-mask-size: contain;
  -webkit-mask-position: center;
  pointer-events: none;
}

.brand-logo{font-family: var(--font-sans);}
.brand-logo .logo-text{font-size:20px;font-weight:800;letter-spacing:0.6px;fill:currentColor}
.brand-logo .logo-subtext{font-size:11px;font-weight:600;letter-spacing:0.4px;fill:currentColor}
.brand-logo .logo-accent{fill:var(--color-primary)}
.grow{flex:1;min-width:0}
.auth-buttons{
  display:flex;
  margin-left:auto;
  margin-right: var(--space-2);
  align-items:center;
  gap:var(--space-1)
}
.header-icons{
  display:none;
  align-items:center;
  gap:8px;
  flex-shrink: 0;
}
.icon-btn{
  border:none;
  background:transparent;
  padding:0 4px;
  margin:0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  color: var(--icon-accent);
}
.icon-btn .material-symbols-outlined{
  font-variation-settings:
    'FILL' 0,
    'wght' 300,
    'GRAD' 0,
    'opsz' 24;
  font-size:22px;
}

/* Defensive sizing for icons */
.material-symbols-outlined{font-size:22px;line-height:1}
.mini-icon{width:24px;height:24px;flex-shrink:0}
.mini-icon svg{max-width:32px;max-height:32px}
svg.theme-icon{
  width: 24px !important;
  height: 24px !important;
  max-width: 24px !important;
  max-height: 24px !important;
  display: inline-block;
}

.theme-switch{
  position: relative;
  display: inline-flex;
  align-items: center;
  flex-shrink: 0;
}
.theme-switch--sidebar{
  width: calc(100% - 16px);
  margin: 0 8px;
}
.theme-switch--sidebar .theme-switch-trigger{
  width: 100%;
  justify-content: flex-start;
}
.theme-switch--sidebar .theme-switch-menu{
  left: 0;
  right: auto;
}
.sidebar .theme-switch{
  display: none;
}
.theme-switch-trigger{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid var(--line);
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  font-weight: 600;
}
.theme-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: var(--color-primary);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-primary) 25%, transparent);
}
.theme-switch-icon{
  width: 18px;
  height: 18px;
  display: inline-flex;
}
.theme-switch-trigger:hover{
  background: var(--hover-soft);
}
.theme-switch-menu{
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  min-width: 240px;
  padding: 10px;
  border-radius: 14px;
  background: var(--surface);
  border: 1px solid var(--line);
  box-shadow: var(--shadow);
  display: none;
  z-index: 80;
}
.theme-switch.is-open .theme-switch-menu{
  display: block;
}
.theme-switch-title{
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
  margin: 4px 8px 8px;
}
.theme-switch-item{
  width: 100%;
  text-align: left;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  font-size: 14px;
  cursor: pointer;
}
.theme-switch-item:hover{
  background: var(--hover-soft);
}
.theme-switch-item[aria-checked="true"]{
  background: var(--menu-active-bg);
  border-color: color-mix(in srgb, var(--color-primary) 35%, transparent);
  color: var(--sidebar-accent-strong);
  font-weight: 600;
}

@media (max-width: 768px){
  .theme-switch-label{display: none;}
  .theme-switch-trigger{padding: 6px;}
}

.btn{
  position:relative; isolation:isolate;
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  min-height: var(--btn-min-h);
  padding: var(--btn-pad-y) var(--btn-pad-x);
  border-radius:var(--r-btn);
  border:1px solid var(--btn-primary-border);
  background:var(--btn-primary-bg);
  color:var(--btn-primary-text);
  font-weight:700; letter-spacing:.1px;
  box-shadow:none;
  transition:transform .12s ease, box-shadow .22s ease, background .18s ease, border-color .18s ease, filter .18s ease;
  text-decoration:none !important;
  cursor:pointer;
}
.btn:hover{transform:translateY(-1px); background:var(--btn-primary-bg-hover)}
.btn:active{transform:translateY(0)}
.btn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 2px var(--surface), 0 0 0 5px var(--focus-ring);
}

/* Ghost */
.btn.btn--ghost{background:transparent;border:1px solid var(--btn-ghost-border);color:var(--btn-ghost-text);box-shadow:none}
.btn.btn--ghost:hover{background:var(--btn-ghost-bg-hover); border-color:var(--btn-ghost-border); color:var(--btn-ghost-text)}
.btn[disabled], .btn[aria-disabled="true"]{ opacity:.55; pointer-events:none; box-shadow:none }

@media (prefers-reduced-motion: reduce){
  .btn{ transition: none !important }
  .btn:hover,.btn:active{ transform: none }
}

/* Бета-баннер */
.phase{background:var(--brand-weak-bg);border-top:1px solid var(--brand-border);border-bottom:1px solid var(--brand-border)}
.phase .content{display:flex;gap:12px;align-items:center;padding:10px 0}
.tag{font-size:.8rem;font-weight:800;color:var(--tag-text);background:var(--tag-bg);border:1px solid var(--tag-border);border-radius:6px;padding:.25rem .5rem}
.phase .text{color:var(--text)}

/* Hero */
.hero{display:grid;grid-template-columns:1.05fr .95fr;gap:var(--gap);align-items:center;padding:var(--space-6) 0}
@media (max-width:900px){.hero{grid-template-columns:1fr}}
h1{margin:.2em 0 .5em;font-size:clamp(28px,4.2vw,44px);line-height:1.12}
.lead{color:var(--muted);max-width:64ch}
.hero-art{
  background:var(--hero-bg);
  border-radius:20px;border:1px solid var(--brand-border);
  box-shadow:var(--shadow); padding:18px; overflow:hidden;
}
.hero-figure{width:100%;height:auto;display:block}

/* Sections */
section{padding:var(--section-y) 0}
.section-title{font-size:clamp(22px,3vw,32px);margin:0 0 var(--space-3)}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:var(--gap)}
@media (max-width:900px){.grid{grid-template-columns:1fr}}
.cards-3{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--gap)}
@media (max-width:900px){.cards-3{grid-template-columns:1fr}}
.cards-6{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--gap)}
@media (max-width:900px){.cards-6{grid-template-columns:1fr}}
.card{background:var(--surface);border:1px solid var(--line);border-radius:var(--r-card);padding:var(--space-3);box-shadow:var(--shadow)}
.card h3{margin:.1em 0 .35em;font-size:clamp(18px,2.2vw,22px)}
.card p{color:var(--muted)}

.is-home{
  --home-bg-primary:var(--neutral-75);
  --home-bg-secondary:var(--neutral-0);
  --home-surface-card:var(--neutral-0);
  --home-border-subtle:var(--line);
  --home-shadow-card:var(--shadow);
  --home-text-primary:var(--neutral-900);
  --home-text-secondary:var(--neutral-600);
}
.is-home section{padding-block:clamp(48px,6vw,96px)}
.is-home section:nth-of-type(even){background:var(--home-bg-secondary)}
.is-home section:nth-of-type(odd){background:var(--home-bg-primary)}
.is-home .card,
.is-home .surface,
.is-home .panel{
  background:var(--home-surface-card);
  border:1px solid var(--home-border-subtle);
  box-shadow:var(--home-shadow-card);
}
.is-home h1,
.is-home h2,
.is-home h3{color:var(--home-text-primary)}
.is-home p,
.is-home li{color:var(--home-text-secondary)}

/* Status table */
.status-grid{display:grid;grid-template-columns:2fr 1fr 1fr;gap:8px;align-items:center}
@media (max-width:900px){.status-grid{grid-template-columns:1fr 1fr;row-gap:10px} .status-grid .h{grid-column:1 / -1}}
.status-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  line-height:1;
  border:1px solid transparent;
  white-space:nowrap;
}
.status-icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.status-icon svg{
  width:14px;
  height:14px;
  stroke:currentColor;
  fill:none;
  stroke-width:2;
}
.status--done{
  background:var(--status-success-bg);
  color:var(--status-success-text);
  border-color:var(--status-success-border);
}
.status--inprogress{
  background:var(--status-warning-bg);
  color:var(--status-warning-text);
  border-color:var(--status-warning-border);
}
.status--planned{
  background:var(--status-muted-bg);
  color:var(--status-muted-text);
  border-color:var(--status-muted-border);
}
footer{border-top:1px solid var(--line);padding:22px 0;color:var(--muted)}

/* Dark scheme (оставляем как есть, но сайт в light) */
@media (prefers-color-scheme: dark){
  :root{color-scheme: dark;
    --bg:#0b1220; --surface:#0f172a; --soft:#0b1323; --text:#e6edf6; --muted:#9cb3c8; --line:#12213a;
    --shadow:0 10px 24px rgba(0,0,0,.35);
    --header-bg: #0f172a;
  }
  .btn{color:var(--primary-ink)}
  .phase .text{color:var(--text)}
}

/* Sidebar and burger */
/* Shift content when sidebar collapses */
body{
  padding-left: 0;
  transition: none;
}
body > .app-content{
  margin-left: var(--sidebar-collapsed-width);
  padding-top: calc(var(--header-height) + 8px);
  transition: margin-left var(--transition-fast);
  width: calc(100% - var(--sidebar-collapsed-width));
}
body > footer{
  margin-left: var(--sidebar-collapsed-width);
  transition: margin-left var(--transition-fast);
}
body.menu-open > .app-content,
body.menu-open > footer{
  margin-left: var(--sidebar-expanded-width);
}
body.menu-open > .app-content{
  width: calc(100% - var(--sidebar-expanded-width));
}

/* Sidebar */
.sidebar{
  position: fixed;
  z-index: 1200;
  top: var(--header-height);
  left: 0;
  bottom: 0;
  width: var(--sidebar-collapsed-width);
  background: var(--bg-sidebar);
  border-right: 1px solid var(--border-color-soft);
  display: flex;
  flex-direction: column;
  transition: width var(--transition-fast);
}
body.menu-open .sidebar{width: var(--sidebar-expanded-width)}
.sidebar-inner{
  flex: 1 1 auto;
  padding: 8px 0 12px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  overflow-y: auto;
  overscroll-behavior: contain;
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb) transparent;
}
.sidebar-inner::-webkit-scrollbar{width: 6px}
.sidebar-inner::-webkit-scrollbar-thumb{background: var(--scrollbar-thumb); border-radius: 999px}
.sidebar-inner::-webkit-scrollbar-track{background: transparent}

.sidebar-section-label{
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--neutral-500);
  padding: 8px 18px 4px;
  white-space: normal;
}

.menu-item{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px;
  font-size: 14px;
  color: var(--neutral-800);
  cursor: pointer;
  transition:
    background var(--transition-fast),
    color var(--transition-fast),
    transform var(--transition-fast);
  border-radius: 10px;
  margin: 0 8px;
}
.menu-item:hover{background: var(--bg-sidebar-hover); transform: translateX(2px)}
.menu-item.active{background: var(--menu-active-bg); color: var(--sidebar-accent-strong); font-weight: 600}
.is-home .menu-item[data-path="/"]{background: var(--menu-active-bg); color: var(--sidebar-accent-strong); font-weight: 600}

.menu-icon.material-symbols-outlined{
  font-variation-settings:'FILL' 0,'wght' 200,'GRAD' 0,'opsz' 24;
  font-size: 22px;
  line-height: 1;
  color: var(--sidebar-accent);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.menu-item:hover .menu-icon,
.menu-item.active .menu-icon{color: var(--sidebar-accent-strong)}
.is-home .menu-item[data-path="/"] .menu-icon{color: var(--sidebar-accent-strong)}

.menu-label{
  opacity: 1;
  white-space: normal;
  line-height: 1.3;
  word-break: break-word;
  transition: opacity var(--transition-fast), transform var(--transition-fast);
}
body:not(.menu-open) .menu-item{justify-content: center; padding-inline: 0; margin-inline: 0}
body:not(.menu-open) .menu-label,
body:not(.menu-open) .sidebar-section-label{display: none}

.menu-separator{
  margin: 6px 10px;
  border-bottom: 1px solid color-mix(in srgb, var(--neutral-300) 90%, transparent);
}

/* Burger button */
.burger{
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  border-radius: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0;
  margin-right: 16px;
}
.burger-icon{width: 18px; height: 14px; position: relative;}
.burger-line{
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  border-radius: 999px;
  background: var(--neutral-900);
  transition: transform var(--transition-fast), opacity var(--transition-fast), top var(--transition-fast), bottom var(--transition-fast);
}
.burger-line:nth-child(1){top: 0}
.burger-line:nth-child(2){top: 6px}
.burger-line:nth-child(3){bottom: 0}
body.menu-open .burger-line:nth-child(1){top: 6px; transform: rotate(45deg)}
body.menu-open .burger-line:nth-child(2){opacity: 0}
body.menu-open .burger-line:nth-child(3){bottom: 6px; transform: rotate(-45deg)}

/* Desktop burger centering only */
@media (min-width: 769px){
  body:not(.menu-open) header .wrap{padding-left: 0;}
  body:not(.menu-open) .burger,
  body.menu-open .burger{
    margin-left: calc(var(--sidebar-collapsed-width)/2 - 14px);
  }
}

@media (max-width: 768px){
  header{
    background: var(--neutral-0);
  }

  body > .app-content,
  body > footer{margin-left: 0;}

  body.menu-open > .app-content,
  body.menu-open > footer{margin-left: 0;}

  body > .app-content,
  body.menu-open > .app-content{width: 100%;}

  .sidebar{
    width: var(--sidebar-expanded-width);
    transform: translateX(-100%);
    transition: transform var(--transition-fast);
    z-index: 2100;
  }
  body.menu-open .sidebar{transform: translateX(0);}

  .auth-buttons{display: none;}
  .header-icons{display: flex;}

  header .wrap,
  header .nav{
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  .nav{gap:12px;}
  .brand{max-width: 50vw;}

  .burger{margin-left: 4px !important;}
  body:not(.menu-open) .burger,
  body.menu-open .burger{margin-left: 4px !important;}

  /* header использует inline svg, но оставим совместимость */
  .brand img{height: 32px;}
}

/* Mobile drawer overlay */
.mobile-overlay{
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.35);
  z-index: 2000;
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease;
}
body.menu-open .mobile-overlay{
  opacity: 1;
  pointer-events: auto;
}
@media (max-width: 768px){
  body.menu-open{
    overflow: hidden;
  }
}

/* v9 auth burger adjustments */
.auth-buttons .btn{
  min-height: 40px;
  padding-top: 0.5625rem;
  padding-bottom: 0.5625rem;
}

/* Remove underline from menu items */
.menu-item,
.menu-item *,
.menu-item:hover,
.menu-item:hover *,
.menu-item:focus,
.menu-item:focus *,
.menu-item:active,
.menu-item:active *{
  text-decoration: none !important;
}

/* Align auth buttons flush right */
header .nav{width: 100%;}
.auth-buttons{margin-right: 0;}

/* Sticky Account Footer (mobile sidebar) */
:root{ --sidebar-footer-display: block; }
@media (min-width: 769px){ :root{ --sidebar-footer-display: none; } }

@media (min-width: 1200px){
  body.menu-open > .app-content,
  body.menu-open > footer{
    margin-left: var(--sidebar-expanded-width);
  }
  body.menu-open > .app-content{
    width: calc(100% - var(--sidebar-expanded-width));
  }
  body.menu-open .sidebar{
    width: var(--sidebar-expanded-width);
    transform: none;
  }
}

@media (max-width: 768px){
  .sidebar{display: flex; flex-direction: column;}
  .sidebar-inner{flex: 1 1 auto; overflow-y: auto;}
}

.sidebar-footer{
  position: sticky;
  bottom: 0;
  display: var(--sidebar-footer-display);
  flex: 0 0 auto;
  padding: 10px 8px 12px;
  border-top: 1px solid color-mix(in srgb, var(--neutral-300) 90%, transparent);
  background: var(--bg-sidebar);
}
.sidebar-footer-title{
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--neutral-500);
  padding: 8px 18px 4px;
}
.sidebar-footer-actions{display: flex; flex-direction: column; gap: 4px;}
.sidebar-footer-item{
  width: 100%;
  text-decoration: none;
  color: inherit;
  background: transparent;
  border: none;
  cursor: pointer;
  font: inherit;
}
.sidebar-footer-logout{text-align: left;}

body:not(.menu-open) .sidebar-footer-title{display: none;}
body:not(.menu-open) .sidebar-footer-item{
  justify-content: center;
  padding-inline: 0;
  margin-inline: 0;
}
body:not(.menu-open) .sidebar-footer-item .menu-label{display: none;}

/* Mobile Bottom Navigation */
@media (min-width: 769px){
  .mobile-bottom-nav{display: none;}
}

@media (max-width: 768px){
  body.has-mobile-bottom-nav .content,
  body.has-mobile-bottom-nav .app-content{
    padding-bottom: calc(84px + env(safe-area-inset-bottom, 0px));
  }

  body > .app-content{
    padding-top: calc(var(--header-height) + env(safe-area-inset-top, 0px) + 12px) !important;
  }
}

.mobile-bottom-nav{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1200;
  display: flex;
  align-items: center;
  justify-content: space-around;
  gap: 6px;
  padding: 8px 12px calc(8px + env(safe-area-inset-bottom, 0px));
  background: var(--bg-sidebar);
  border-top: 1px solid color-mix(in srgb, var(--neutral-300) 90%, transparent);
}
.mobile-bottom-nav-item{
  flex: 1 1 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 6px 8px;
  text-decoration: none;
  color: var(--neutral-800);
  font-size: 11px;
  line-height: 1.2;
  border-radius: 12px;
  transition: background var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
}
.mobile-bottom-nav-item:hover{
  background: var(--bg-sidebar-hover);
  transform: translateY(-1px);
}
.mobile-bottom-nav-item.is-active{
  background: var(--menu-active-bg);
  color: var(--sidebar-accent-strong);
  font-weight: 600;
}
.mobile-bottom-nav-icon{
  font-variation-settings:"FILL" 0,"wght" 200,"GRAD" 0,"opsz" 24;
  font-size: 22px;
  line-height: 1;
  color: var(--sidebar-accent);
}
.mobile-bottom-nav-item.is-active .mobile-bottom-nav-icon{
  color: var(--sidebar-accent-strong);
}
